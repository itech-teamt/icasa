{% extends 'base.html' %}
{##}
{#{% block center_body %}#}
{##}
{##}
{#	<div class="main_con clearfix">#}
{#		<div class="left_menu_con clearfix">#}
{#			<h3>My Account</h3>#}
{#			<ul>#}
{#				<li><a href="{% url "user:order" 1 %}">· My Orders</a></li>#}
{#			</ul>#}
{#		</div>#}
{#		<div class="right_content clearfix">#}
{#				<div class="info_con clearfix">#}
{#				<h3 class="common_title2">Basic Info</h3>#}
{#						<ul class="user_info_list">#}
{#							<li><span>Username：</span>{{ user.username }}</li>#}
{#                            <li><span>First name：</span>{{ user.first_name }}</li>#}
{#                            <li><span>Last name：</span>{{ user.last_name }}</li>#}
{#							<li><span>Phone No：</span>{{ user.userprofile.phone }}</li>#}
{#                            <li><span>Zip Code：</span>{{ user.userprofile.zip }}</li>#}
{#							<li><span>Address：</span>{{ user.userprofile.address }}</li>#}
{#						</ul>#}
{#                    <a href="{% url 'user:profile_update' %}">Edit</a>#}
{#				</div>#}
{#            <h3 class="common_title2">{{ explain }}</h3>#}
{#            <div class="has_view_list">#}
{#                <ul class="goods_type_list clearfix">#}
{#                    {%  for product in products_list %}#}
{#                    <li>#}
{#                        <a href="/{{ product.id }}/"><img src="/static/{{ product.image }}"></a>#}
{#                        <h4><a href="/{{ product.id }}/">{{ product.name }}</a></h4>#}
{#                        <div class="operate">#}
{#                            <span class="prize">${{ product.price }}</span>#}
{#                            <span class="unit">{{ product.price }}/{{ product.unit }}</span>#}
{#                            <a href="/cart/add{{ product.id }}_1/" class="add_goods" title="Add to Cart"></a>#}
{#                        </div>#}
{#                    </li>#}
{#                    {% endfor %}#}
{#			</ul>#}
{#            </div>#}
{#		</div>#}
{#	</div>#}
{#{% endblock center_body %}#}

{% block body %}
    <!--== Start Page Breadcrumb ==-->
<div class="page-breadcrumb-wrap">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <div class="page-breadcrumb">
                    <ul class="nav">
                        <li><a href="{% url 'product:index' %}">Home</a></li>
                        <li><a href="#">My Account</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>
<!--== End Page Breadcrumb ==-->

<!--== Page Content Wrapper Start ==-->
<div id="page-content-wrapper">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <!-- My Account Page Start -->
                <div class="myaccount-page-wrapper">
                    <!-- My Account Tab Menu Start -->
                    <div class="row">
                        <div class="col-lg-3">
                            <div class="myaccount-tab-menu nav" role="tablist">
                                <a href="#dashboad" class="active" data-toggle="tab"><i class="fa fa-dashboard"></i>
                                    My Account</a>

                                <a href="#orders" data-toggle="tab"><i class="fa fa-cart-arrow-down"></i> Orders</a>

                                <a href="#address-edit" data-toggle="tab"><i class="fa fa-map-marker"></i> address</a>

                                <a href="#account-info" data-toggle="tab"><i class="fa fa-user"></i> Account Details</a>

                                <a href="{% url 'account_logout' %}"><i class="fa fa-sign-out"></i> Logout</a>
                            </div>
                        </div>
                        <!-- My Account Tab Menu End -->

                        <!-- My Account Tab Content Start -->
                        <div class="col-lg-9 mt-15 mt-lg-0">
                            <div class="tab-content" id="myaccountContent">
                                <!-- Single Tab Content Start -->
                                <div class="tab-pane fade show active" id="dashboad" role="tabpanel">
                                    <div class="myaccount-content">
                                        <h3>Dashboard</h3>

                                        <div class="welcome">
                                            <p>Hello, <strong>{{ user.first_name }} {{ user.last_name }}</strong></p>
                                        </div>

                                        <p class="mb-0">From your account dashboard. you can easily check & view your recent orders, edit your profile and also manage your addresses.</p>
                                    </div>
                                </div>
                                <!-- Single Tab Content End -->

                                <!-- Single Tab Content Start -->
                                <div class="tab-pane fade" id="orders" role="tabpanel">
                                    <div class="myaccount-content">
                                        <h3>Order History</h3>
                                        <div class="myaccount-table table-responsive text-center">
                                                <tbody>
                                                    {% for order in orders_list %}
                                                        <table class="table table-bordered">
                                                        <thead class="thead-light">
                                                        <tr>
                                                            <th>Order ID</th>
                                                            <th>Date</th>
                                                            <th>Total</th>
                                                            <th>Status</th>
                                                        </tr>
                                                        </thead>
                                                        <tr>
                                                            <td>{{ order.id }}</td>
                                                            <td>{{ order.date|date }}</td>
                                                            <td>${{ order.total_price }}</td>
                                                            <td>Pending</td>
                                                        </tr>
                                                        <table class="table table-bordered">
                                                        <tr>
                                                            <th>Item Purchased</th>
                                                            <th>Product</th>
                                                            <th>Price per Product</th>
                                                            <th>Qty</th>
                                                        </tr>
                                                        {% for order_detail in order.orderdetail_set.all %}
                                                                <tr>
                                                                    <td><img src="/static/{{ order_detail.product.image }}/" width=40 height=40></td>
                                                                    <td>{{ order_detail.product.name }}</td>
                                                                    <td>${{ order_detail.product.price }}</td>
                                                                    <td>{{ order_detail.count }}</td>
                                                                </tr>
                                                        {% endfor %}
                                                        </table>
                                                            </tbody>
                                                        </table>
                                                        <br>
                                                        <br>
                                                    {% endfor %}

                                        </div>
{#                                        <div class="products-settings-option d-block d-md-flex">#}
{#                                            <nav class="page-pagination">#}
{#                                                <ul class="pagination">#}
{#                                                    {% if page.has_previous %}#}
{#                                                        <li><a href="?page={{page.previous_page_number}}#orders" aria-label="Previous">&laquo;</a></li>#}
{#                                                    {% endif %}#}
{#                                                    {% for pindex in paginator.page_range %}#}
{#                                                        <li><a href="?page={{pindex}}#orders"><span>{{pindex}}</span></a></li>#}
{#                                                        {% if pindex == page.number %}#}
{#                                                            <li><a class="active" href="/list{{ category.id }}_{{pindex}}_{{ sort }}">{{ pindex }}</a></li>#}
{#                                                        {% else %}#}
{#                                                            <li><a href="/list{{ category.id }}_{{pindex}}_{{ sort }}">{{ pindex }}</a></li>#}
{#                                                        {% endif %}#}
{#                                                    {% endfor %}#}
{#                                                    {% if page.has_next %}#}
{#                                                        <li><a href="?page={{page.next_page_number}}#orders" aria-label="Next">&raquo;</a></li>#}
{#                                                    {% endif %}#}
{#                                                </ul>#}
{#                                            </nav>#}
{#                                        </div>#}
                                    </div>
                                </div>
                                <!-- Single Tab Content End -->

{#                                <!-- Single Tab Content Start -->#}
{#                                <div class="tab-pane fade" id="payment-method" role="tabpanel">#}
{#                                    <div class="myaccount-content">#}
{#                                        <h3>Payment Method</h3>#}
{##}
{#                                        <p class="saved-message">You Can't Saved Your Payment Method yet.</p>#}
{#                                    </div>#}
{#                                </div>#}
{#                                <!-- Single Tab Content End -->#}
{##}
                                <!-- Single Tab Content Start -->
                                <div class="tab-pane fade" id="address-edit" role="tabpanel">
                                    <div class="myaccount-content">
                                        <h3>Current Address</h3>
                                        <div class="account-address-form">
                                            <form method="post" action="" id="address-form" enctype="multipart/form-data">
                                                {% csrf_token %}

                                                <div class="single-input-item">
                                                    <label for="email" class="required">{{ pform.address.label }}</label>
                                                    {{ pform.address }}
                                                </div>

                                                <div class="single-input-item">
                                                    <label for="email" class="required">{{ pform.zip.label }}</label>
                                                    {{ pform.zip }}
                                                </div>
                                                <div class="single-input-item">
                                                    <label for="email" class="required">{{ pform.phone.label }}</label>
                                                    {{ pform.phone }}
                                                </div>
                                                <div class="single-input-item">
                                                    <button class="btn">Update Address</button>
                                                </div>
                                            </form>
                                        </div>
                                    </div>
                                </div>
                                <!-- Single Tab Content End -->

                                <!-- Single Tab Content Start -->
                                <div class="tab-pane fade" id="account-info" role="tabpanel">
                                    <div class="myaccount-content">
                                        <h3>Account Details</h3>

                                        <div class="account-details-form">
                                            <form method="post" action="" id="basicinfo-form" enctype="multipart/form-data">
                                                {% csrf_token %}

                                                <div class="row">
                                                    <div class="col-lg-6">
                                                        <div class="single-input-item">
                                                            <label for="first-name" class="required">{{ uform.first_name.label }}</label>
                                                           {{ uform.first_name }}
                                                        </div>
                                                    </div>

                                                    <div class="col-lg-6">
                                                        <div class="single-input-item">
                                                            <label for="last-name" class="required">{{ uform.last_name.label }}</label>
                                                            {{ uform.last_name }}
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="single-input-item">
                                                    <label for="email" class="required">{{ uform.email.label }}</label>
                                                    {{ uform.email }}
                                                </div>
                                                 <div class="single-input-item">
                                                    <button class="btn">Save Changes</button>
                                                </div>
                                            </form>
                                        </div>
                                    </div>
                                </div>
                                <!-- Single Tab Content End -->
                            </div>
                        </div>
                        <!-- My Account Tab Content End -->
                    </div>
                </div>
                <!-- My Account Page End -->
            </div>
        </div>
    </div>
</div>
<!--== Page Content Wrapper End ==-->
{% endblock %}